<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>NS Stopped Working - LoopDocs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/admonitions.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-109876065-1', 'loopkit.github.io');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">LoopDocs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQs <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../faqs/docs-faqs/">Using This Site FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/FAQs/">General Loop FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/omnipod-faqs/">Omnipod FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/branch-faqs/">Branch FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/update-faqs/">Updating Loop FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/ios13/">iOS 13 FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/rileylink-faqs/">RileyLink FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/algorithm-faqs/">Algorithm FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/cgm-faqs/">CGM FAQs</a>
</li>

                    
                        
<li >
    <a href="../../faqs/safety-faqs/">Safety Tips</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Build App <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../build/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../build/step1/">Step 1 Compatible Computer</a>
</li>

                    
                        
<li >
    <a href="../../build/step2/">Step 2 Compatible iPhone/iPod touch</a>
</li>

                    
                        
<li >
    <a href="../../build/step3/">Step 3 Compatible Pump</a>
</li>

                    
                        
<li >
    <a href="../../build/step4/">Step 4 Compatible CGM</a>
</li>

                    
                        
<li >
    <a href="../../build/step5/">Step 5 Order a RileyLink</a>
</li>

                    
                        
<li >
    <a href="../../build/step6/">Step 6 Enroll in Apple Developer Program</a>
</li>

                    
                        
<li >
    <a href="../../build/step7/">Step 7 Install Homebrew</a>
</li>

                    
                        
<li >
    <a href="../../build/step8/">Step 8 Download Xcode</a>
</li>

                    
                        
<li >
    <a href="../../build/step9/">Step 9 Xcode Preferences</a>
</li>

                    
                        
<li >
    <a href="../../build/step10/">Step 10 Test Settings</a>
</li>

                    
                        
<li >
    <a href="../../build/step11/">Step 11 Make plans for Loop Data</a>
</li>

                    
                        
<li >
    <a href="../../build/step12/">Step 12 Meet Community</a>
</li>

                    
                        
<li >
    <a href="../../build/step13/">Step 13 Download Loop code</a>
</li>

                    
                        
<li >
    <a href="../../build/step14/">Step 14 Build Loop app</a>
</li>

                    
                        
<li >
    <a href="../../build/build_errors/">Oh dear! Build errors?</a>
</li>

                    
                        
<li >
    <a href="../../build/code_customization/">Customize your Loop</a>
</li>

                    
                        
<li >
    <a href="../../build/updating/">Ready to Update your Loop?</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Set up App <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../operation/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../build/health/">Health Permissions</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Add Pump</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/loop-settings/mdt-pump/">Add Medtronic</a>
</li>

        
            
<li >
    <a href="../../operation/loop-settings/omnipod-pump/">Add Omnipod</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../operation/loop-settings/cgm/">Add CGM</a>
</li>

                    
                        
<li >
    <a href="../../operation/loop-settings/configurations/">Configurations</a>
</li>

                    
                        
<li >
    <a href="../../operation/loop-settings/services/">Loop Services</a>
</li>

                    
                        
<li >
    <a href="../../operation/loop-settings/displays/">Loop Displays</a>
</li>

                    
                        
<li >
    <a href="../../operation/loop-settings/rileylink/">RileyLink menu</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Operate <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">How to Use Loop App</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/features/carbs/">Carb Entries</a>
</li>

        
            
<li >
    <a href="../../operation/features/bolus/">Bolus</a>
</li>

        
            
<li >
    <a href="../../operation/features/workout/">Workout Targets</a>
</li>

        
            
<li >
    <a href="../../operation/features/ice/">Using ICE info</a>
</li>

        
            
<li >
    <a href="../../operation/features/watch/">Apple Watch</a>
</li>

        
            
<li >
    <a href="../../operation/features/widget/">iPhone widget</a>
</li>

        
            
<li >
    <a href="../../operation/features/notifications/">Loop Notifications</a>
</li>

        
            
<li >
    <a href="../../operation/features/battery/">Pump Battery</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Looping Tips</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/loop/open-loop/">Open Loop</a>
</li>

        
            
<li >
    <a href="../../operation/loop/close-loop/">Closed Loop</a>
</li>

        
            
<li >
    <a href="../../operation/loop/looptips/">Loop Tips</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Algorithm</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../operation/algorithm/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/bolus/">Bolus Recommendations</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/prediction/">Glucose Prediction</a>
</li>

        
            
<li >
    <a href="../../operation/algorithm/temp-basal/">Temp Basal Adjustments</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshoot</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../troubleshooting/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/loop-crashing/">Loop crashes</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/green-loop/">Grey Loop</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/yellow-red-loop/">Yellow/Red Loop</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/pod-pairing/">Pod Pairing Failures</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/priming/">MDT Priming and Sites</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/time-change/">Time Changes</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/pump-errors/">MDT Pump Errors</a>
</li>

        
            
<li >
    <a href="../../troubleshooting/omnipod-faults/">Omnipod Faults</a>
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nightscout <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../new_user/">Brand New NS</a>
</li>

                    
                        
<li >
    <a href="../update_user/">Retrofit Existing NS</a>
</li>

                    
                        
<li >
    <a href="../troublehoot/">Setup Troubleshooting</a>
</li>

                    
                        
<li class="active">
    <a href="./">NS Stopped Working</a>
</li>

                    
                        
<li >
    <a href="../azure_migration/">Azure to Heroku</a>
</li>

                    
                        
<li >
    <a href="../ifttt/">IFTTT</a>
</li>

                    
                        
<li >
    <a href="../pebble/">Pebble</a>
</li>

                    
                        
<li >
    <a href="../pushover/">Remote Notifications</a>
</li>

                    
                        
<li >
    <a href="../reports/">Reports</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../troublehoot/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../azure_migration/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#nightscout-issues">Nightscout Issues</a></li>
        
            <li><a href="#mlab-cleanup">mLab Cleanup</a></li>
        
            <li><a href="#step-1-delete-data">Step 1: Delete Data</a></li>
        
            <li><a href="#step-2-repair-database">Step 2: Repair Database</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="nightscout-issues">Nightscout Issues<a class="headerlink" href="#nightscout-issues" title="Permanent link">⌁</a></h1>
<p>The free Nightscout we use also depends on a free database from mLab.  The free database only has so much room...500 MB to be specific.  After a period of time (it will vary, but usually on the order of months), your mLab database could reach its free limits.  When that happens, your NS site may stop showing data properly.  For example, you may notice your Share Bridge will not pull data and your site will be “stale”.</p>
<p>The good news?  Loop can still run just fine until you repair your mLab database.  The bad news?  You just won’t be able to remotely monitor Loop through NS until you clear up some storage space in mLab.</p>
<div class="admonition info">
<p>These steps <strong>WILL BE NEEDED BY EVERYONE AT SOME POINT IN TIME</strong>...so please don't ignore this troubleshooting. If you see anything suddenly strange about your NS site after it had been working fine, start with these steps below. </p>
</div>
<h2 id="mlab-cleanup">mLab Cleanup<a class="headerlink" href="#mlab-cleanup" title="Permanent link">⌁</a></h2>
<p>There are two steps to getting your Nightscout site running again. You will need to do both steps.  The first step clears out some space in your database.  The second steps consolidates the remaining data into a more compact space, and therefore makes the data take up less room overall in your database. You need to do both steps to help keep your NS humming along.</p>
<h2 id="step-1-delete-data">Step 1: Delete Data<a class="headerlink" href="#step-1-delete-data" title="Permanent link">⌁</a></h2>
<p>Go to your Nightscout site's settings (the three horizontal bars in the upper right of your Nightscout site) and open your Admin Tools for the site.  Click on the buttons to "Delete all documents" in your Clean Mongo status database section of the Admin Tools.  For good measure, also click on the buttons for removing future items as well.  </p>
<p align="center">
<img src="../img/ns_clean.jpeg" width="250">
</p>

<h2 id="step-2-repair-database">Step 2: Repair Database<a class="headerlink" href="#step-2-repair-database" title="Permanent link">⌁</a></h2>
<p>Now that you cleared out some database space, we can now make the database more efficient by "repairing" the database.</p>
<p>To begin the repair process, click on the mlab link in your Heroku site control panel.</p>
<p align="center">
<img src="../img/mlab_link.jpg" width="750">
</p>

<p>Then click on the <code>Tools</code> tab in the screen that opens.  Click on the <code>commands</code> button and then select the <code>repairDatabase</code> from the dropdown menu of available commands.  At the bottom of the screen, select the <code>Run Command</code> button. </p>
<p align="center">
<img src="../img/mlab_compact2.png" width="650">
</p>

<p>After a short time, you should get a return message of "ok" at the bottom of the command menu box.  If you failed to clear out your Mongo status database before running this command, you will likely not get a successful repair and instead your pointer wheel will just keep spinning.  Make sure you first clean out the database section as described above with your Nightscout Admin Tools.</p>
<p>You can verify that your database housekeeping was successful by returning to your NS site and waiting for the next Loop upload.  You should see all your information back in with the next Loop run.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>